<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Validaci√≥n Formulario</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .test-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
        }
        .test-button:hover {
            background: #2563eb;
        }
        .result {
            margin-top: 20px;
            padding: 20px;
            background: #f8fafc;
            border-radius: 8px;
            border-left: 4px solid #3b82f6;
        }
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 5px 0;
        }
        .status.success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }
        .status.error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fca5a5;
        }
        .question-test {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #3b82f6;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üîç Test Validaci√≥n Formulario</h1>
        <p>Este test verifica que la validaci√≥n del formulario funcione correctamente.</p>
        
        <button class="test-button" onclick="testValidation()">üîç Test Validaci√≥n</button>
        <button class="test-button" onclick="testSpecificQuestions()">üìù Test Preguntas Espec√≠ficas</button>
        <button class="test-button" onclick="testCompleteForm()">üöÄ Test Formulario Completo</button>
        
        <div id="testResult" class="result" style="display: none;">
            <h3>Resultado del Test:</h3>
            <div id="testContent"></div>
        </div>
    </div>

    <script>
        // Simular respuestas de prueba
        const testAnswers = {
            q1: 'urbana',
            q2: ['falta_empleo', 'salud', 'ambientales'],
            q3: 'mucho',
            q4: 'desempleado',
            q5: 'no',
            q6: 'si',
            q7: 'deficiente',
            q8: 'secundaria',
            q9: 'capacitacion',
            q10: 'si'
        };

        function testValidation() {
            // Simular el sistema de validaci√≥n
            const diagnosticForm = {
                answers: testAnswers,
                totalQuestions: 10,
                
                validateAllAnswers() {
                    console.log('Validando respuestas:', this.answers);
                    
                    for (let i = 1; i <= this.totalQuestions; i++) {
                        const questionName = `q${i}`;
                        const answer = this.answers[questionName];
                        
                        console.log(`Validando pregunta ${i} (${questionName}):`, answer);
                        
                        // Para pregunta 2 (checkboxes), verificar que al menos una opci√≥n est√© seleccionada
                        if (questionName === 'q2') {
                            if (!answer || !Array.isArray(answer) || answer.length === 0) {
                                console.log(`Pregunta ${i} no respondida (checkboxes vac√≠as)`);
                                return false;
                            }
                        } else {
                            // Para radio buttons, verificar que haya una respuesta
                            if (!answer || answer === '') {
                                console.log(`Pregunta ${i} no respondida (radio button vac√≠o)`);
                                return false;
                            }
                        }
                    }
                    
                    console.log('Todas las preguntas est√°n respondidas');
                    return true;
                }
            };

            const isValid = diagnosticForm.validateAllAnswers();
            
            document.getElementById('testResult').style.display = 'block';
            document.getElementById('testContent').innerHTML = `
                <h4>üîç Test Validaci√≥n:</h4>
                <div class="status ${isValid ? 'success' : 'error'}">
                    <strong>Validaci√≥n:</strong> ${isValid ? '‚úÖ Todas las preguntas respondidas' : '‚ùå Faltan preguntas por responder'}
                </div>
                <div class="status success">
                    <strong>Respuestas cargadas:</strong> ${Object.keys(testAnswers).length}/10 preguntas
                </div>
                <div class="status ${testAnswers.q2 && testAnswers.q2.length > 0 ? 'success' : 'error'}">
                    <strong>Pregunta 2 (checkboxes):</strong> ${testAnswers.q2 && testAnswers.q2.length > 0 ? '‚úÖ ' + testAnswers.q2.length + ' opciones seleccionadas' : '‚ùå No seleccionada'}
                </div>
                <div class="status ${testAnswers.q6 ? 'success' : 'error'}">
                    <strong>Pregunta 6 (condici√≥n especial):</strong> ${testAnswers.q6 ? '‚úÖ ' + testAnswers.q6 : '‚ùå No respondida'}
                </div>
            `;
        }

        function testSpecificQuestions() {
            // Simular diferentes escenarios de validaci√≥n
            const scenarios = [
                {
                    name: 'Formulario Completo',
                    answers: {
                        q1: 'urbana',
                        q2: ['falta_empleo', 'salud'],
                        q3: 'mucho',
                        q4: 'desempleado',
                        q5: 'no',
                        q6: 'si',
                        q7: 'deficiente',
                        q8: 'secundaria',
                        q9: 'capacitacion',
                        q10: 'si'
                    }
                },
                {
                    name: 'Formulario Incompleto',
                    answers: {
                        q1: 'urbana',
                        q2: [], // Vac√≠o
                        q3: 'mucho',
                        q4: 'desempleado',
                        q5: 'no',
                        q6: '', // Vac√≠o
                        q7: 'deficiente',
                        q8: 'secundaria',
                        q9: 'capacitacion',
                        q10: 'si'
                    }
                }
            ];

            let html = '<h4>üìù Test Preguntas Espec√≠ficas:</h4>';
            
            scenarios.forEach(scenario => {
                const diagnosticForm = {
                    answers: scenario.answers,
                    totalQuestions: 10,
                    
                    validateAllAnswers() {
                        for (let i = 1; i <= this.totalQuestions; i++) {
                            const questionName = `q${i}`;
                            const answer = this.answers[questionName];
                            
                            if (questionName === 'q2') {
                                if (!answer || !Array.isArray(answer) || answer.length === 0) {
                                    return false;
                                }
                            } else {
                                if (!answer || answer === '') {
                                    return false;
                                }
                            }
                        }
                        return true;
                    }
                };

                const isValid = diagnosticForm.validateAllAnswers();
                
                html += `
                    <div class="question-test">
                        <div class="status ${isValid ? 'success' : 'error'}">
                            <strong>${scenario.name}:</strong> ${isValid ? '‚úÖ V√°lido' : '‚ùå Inv√°lido'}
                        </div>
                        <p><strong>Respuestas:</strong> ${Object.keys(scenario.answers).length}/10</p>
                        <p><strong>Pregunta 2:</strong> ${scenario.answers.q2 ? scenario.answers.q2.length + ' opciones' : 'Vac√≠a'}</p>
                        <p><strong>Pregunta 6:</strong> ${scenario.answers.q6 || 'Vac√≠a'}</p>
                    </div>
                `;
            });
            
            document.getElementById('testResult').style.display = 'block';
            document.getElementById('testContent').innerHTML = html;
        }

        function testCompleteForm() {
            // Simular datos de categor√≠as
            const categories = {
                economico: 85,
                salud: 70,
                social: 90,
                educacion: 60,
                seguridad: 75,
                ambiental: 80
            };
            
            // Simular resultados completos
            const results = {
                date: new Date().toISOString(),
                generalScore: 75,
                categories: categories,
                recommendations: [
                    'Buscar programas de empleo',
                    'Acceder a servicios de salud',
                    'Participar en actividades comunitarias'
                ],
                diagnosis: 'Diagn√≥stico de prueba',
                answers: testAnswers
            };
            
            // Guardar en localStorage
            localStorage.setItem('diagnosticResults', JSON.stringify(results));
            
            document.getElementById('testResult').style.display = 'block';
            document.getElementById('testContent').innerHTML = `
                <h4>üöÄ Test Formulario Completo:</h4>
                <div class="status success">‚úÖ Datos guardados en localStorage</div>
                <div class="status success">‚úÖ Puntuaci√≥n: ${results.generalScore}</div>
                <div class="status success">‚úÖ Categor√≠as: ${Object.keys(categories).length} categor√≠as</div>
                <div class="status success">‚úÖ Recomendaciones: ${results.recommendations.length} recomendaciones</div>
                <p><strong>Pr√≥ximo paso:</strong> Ve a <a href="resultados.html" target="_blank">resultados.html</a> para ver los resultados completos</p>
            `;
        }
    </script>
</body>
</html>
